<!DOCTYPE html>
<html>
<head>
    <title>Recover Password</title>
</head>
<body>
    <h1>Recover Password</h1>
    <p>Please enter your registered email address. We will send you a link to reset your password.</p>
    <form id="recoverPasswordForm">
        <input type="email" id="recoverEmail" placeholder="Enter your email" required>
        <button type="submit">Send Reset Link</button>
    </form>
    <div id="message"></div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
        import { getAuth, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAT2yL3CxUBzvqcKW8g5nBqzFyvTVhheu0",
            authDomain: "story-writing-8549e.firebaseapp.com",
            projectId: "story-writing-8549e",
            storageBucket: "story-writing-8549e.appspot.com",
            messagingSenderId: "497629109391",
            appId: "1:497629109391:web:dc9c2abac2e4f0cf5424fa",
            measurementId: "G-Q49T2CN7MH"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth();

        const recoverPasswordForm = document.getElementById('recoverPasswordForm');
        recoverPasswordForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const email = document.getElementById('recoverEmail').value;
            sendPasswordResetEmail(auth, email)
                .then(() => {
                    showMessage('Password reset link sent. Please check your email.', 'message');
                })
                .catch((error) => {
                    if (error.code === 'auth/user-not-found') {
                        showMessage('Account not found.', 'message');
                    } else {
                        console.error('Error sending password reset email:', error);
                        showMessage('Error sending password reset email.', 'message');
                    }
                });
        });

        function showMessage(message, divId) {
            const messageDiv = document.getElementById(divId);
            messageDiv.style.display = "block";
            messageDiv.innerHTML = message;
            messageDiv.style.opacity = 1;
            setTimeout(() => {
                messageDiv.style.opacity = 0;
            }, 5000);
        }
    </script>
</body>
</html>
